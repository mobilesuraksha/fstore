<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>F-Store | Premium Shopping</title>
    <meta name="theme-color" content="#FF6B00">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    
    <style>
        body { font-family: 'Outfit', sans-serif; background-color: #f8fafc; padding-bottom: 120px; -webkit-tap-highlight-color: transparent; }
        .hide-scroll::-webkit-scrollbar { display: none; }
        .glass-header { background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(12px); border-bottom: 1px solid rgba(0,0,0,0.05); }
        .notification-popup { transition: transform 0.5s cubic-bezier(0.68, -0.55, 0.27, 1.55); }
        .cat-btn.active { background-color: #0f172a; color: white; border-color: #0f172a; box-shadow: 0 4px 12px rgba(15, 23, 42, 0.3); }
        .slide-up { animation: slideUp 0.3s ease-out forwards; }
        @keyframes slideUp { from { transform: translateY(100%); } to { transform: translateY(0); } }
    </style>
</head>
<body class="select-none bg-slate-50">

    <div id="userAuthModal" class="fixed inset-0 bg-slate-900 z-[9999] flex items-center justify-center p-6 hidden">
        <div class="bg-white w-full max-w-sm rounded-3xl p-8 shadow-2xl text-center">
            <div class="w-20 h-20 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-4 text-3xl">üëã</div>
            <h2 class="text-2xl font-black text-slate-800 mb-2">Welcome to F-Store</h2>
            <p class="text-slate-400 text-sm mb-6">Enter details to track your orders</p>
            <input id="authName" placeholder="Your Name" class="w-full bg-slate-50 border p-4 rounded-xl font-bold mb-3 outline-none focus:border-orange-500">
            <input id="authPhone" type="tel" placeholder="Mobile Number" class="w-full bg-slate-50 border p-4 rounded-xl font-bold mb-6 outline-none focus:border-orange-500">
            <button onclick="saveUser()" class="w-full bg-slate-900 text-white py-4 rounded-xl font-bold shadow-lg">START SHOPPING</button>
        </div>
    </div>

    <div id="liveNotification" class="fixed top-4 left-4 right-4 z-[100] transform -translate-y-64 transition-transform duration-500">
        <div class="bg-slate-900 text-white p-4 rounded-2xl shadow-2xl flex items-center gap-4 border-l-4 border-green-500">
            <div class="w-12 h-12 rounded-full bg-green-500/20 flex items-center justify-center text-green-400 text-xl animate-pulse"><i class="fas fa-motorcycle"></i></div>
            <div class="flex-1"><h3 class="font-black text-sm uppercase text-green-400" id="notifTitle">Update</h3><p class="text-xs text-slate-300 font-medium" id="notifMsg">Status changed.</p></div>
        </div>
    </div>

    <header class="glass-header sticky top-0 z-50 px-5 py-3 flex justify-between items-center shadow-sm">
        <div class="flex items-center gap-2">
            <div class="bg-gradient-to-br from-[#FF6B00] to-red-600 text-white w-9 h-9 rounded-xl flex items-center justify-center font-black italic shadow-lg text-lg">F</div>
            <div>
                <h1 class="text-xl font-black italic tracking-tighter text-slate-900 leading-none">F-Store</h1>
                <p class="text-[9px] font-bold text-slate-400 uppercase" id="welcomeUser">Guest</p>
            </div>
        </div>
        <div class="relative cursor-pointer" onclick="openCart()">
            <div class="w-9 h-9 bg-white border border-slate-200 text-slate-700 rounded-full flex items-center justify-center shadow-sm"><i class="fas fa-shopping-basket text-sm"></i></div>
            <span id="cartBadge" class="absolute -top-1 -right-1 bg-red-600 text-white text-[9px] w-4 h-4 flex items-center justify-center rounded-full font-bold transform scale-0 transition-transform duration-300">0</span>
        </div>
    </header>

    <div id="view-home" class="animate-fade-in">
        <div class="px-4 pt-6 space-y-6">
            <div class="relative"><i class="fas fa-search absolute left-4 top-3.5 text-slate-400"></i><input type="text" id="searchInput" oninput="render()" placeholder="Search items..." class="w-full bg-white pl-12 pr-4 py-3 rounded-2xl text-sm font-bold shadow-sm outline-none focus:ring-2 focus:ring-[#FF6B00]/20"></div>
            <div class="bg-slate-900 rounded-[2rem] p-6 text-white shadow-2xl relative overflow-hidden h-44 flex flex-col justify-center">
                <div class="relative z-10"><span class="bg-[#FF6B00] px-3 py-1 rounded-lg text-[10px] font-black uppercase">Free Delivery</span><h2 class="text-3xl font-black italic mt-2">SUPER SALE</h2><p class="text-xs text-slate-400 mt-1">50% OFF on first order</p></div>
                <i class="fas fa-shipping-fast text-[8rem] text-white/5 absolute -right-6 -bottom-6"></i>
            </div>
        </div>

        <div class="px-4 mt-8">
            <div class="flex gap-3 overflow-x-auto hide-scroll pb-2">
                <button onclick="filter('All')" class="cat-btn active px-6 py-2 rounded-xl text-xs font-bold border whitespace-nowrap transition-all">üî• All</button>
                <button onclick="filter('Food')" class="cat-btn bg-white text-slate-600 px-6 py-2 rounded-xl text-xs font-bold border border-slate-200 whitespace-nowrap transition-all">üçî Food</button>
                <button onclick="filter('Fashion')" class="cat-btn bg-white text-slate-600 px-6 py-2 rounded-xl text-xs font-bold border border-slate-200 whitespace-nowrap transition-all">üëï Fashion</button>
            </div>
        </div>

        <main id="productGrid" class="p-4 grid grid-cols-2 gap-4"></main>
    </div>

    <div id="view-history" class="hidden px-4 pt-6">
        <h2 class="text-2xl font-black text-slate-800 mb-6">My Orders</h2>
        <div id="historyList" class="space-y-4">
            </div>
    </div>

    <footer class="bg-white border-t border-slate-200 pt-10 pb-32 mt-10 rounded-t-[2.5rem]">
        <div class="px-6 flex flex-col items-center text-center">
            <h2 class="text-xl font-black italic text-slate-400 mb-2">F-Store</h2>
            <p class="text-slate-400 text-xs font-medium mb-6">Follow us on social media</p>

            <div class="flex gap-4 mb-8">
                <a href="#" class="w-10 h-10 rounded-full bg-blue-50 text-blue-600 flex items-center justify-center shadow-sm"><i class="fab fa-facebook-f"></i></a>
                <a href="#" class="w-10 h-10 rounded-full bg-pink-50 text-pink-600 flex items-center justify-center shadow-sm"><i class="fab fa-instagram"></i></a>
                <a href="#" class="w-10 h-10 rounded-full bg-sky-50 text-sky-500 flex items-center justify-center shadow-sm"><i class="fab fa-twitter"></i></a>
            </div>

            <div class="w-full border-t border-slate-100 pt-6">
                <p class="text-[10px] font-bold text-slate-300 uppercase tracking-widest mb-4">Partner Zone</p>
                <div class="flex justify-center gap-3">
                    <a href="admin.html" target="_blank" class="flex items-center gap-2 px-5 py-3 bg-slate-900 text-white rounded-xl text-xs font-bold shadow-lg hover:bg-slate-800">
                        <i class="fas fa-user-shield"></i> Admin Login
                    </a>
                    <a href="delivery.html" target="_blank" class="flex items-center gap-2 px-5 py-3 bg-white border border-slate-200 text-slate-600 rounded-xl text-xs font-bold shadow-sm hover:border-[#FF6B00] hover:text-[#FF6B00]">
                        <i class="fas fa-motorcycle"></i> Rider Login
                    </a>
                </div>
            </div>
            <p class="text-[10px] text-slate-300 font-bold mt-8">¬© 2026 F-Store Inc.</p>
        </div>
    </footer>

    <div class="fixed bottom-0 w-full bg-white/95 backdrop-blur-xl border-t border-slate-100 px-6 py-2 flex justify-between items-center z-40 shadow-lg">
        <button onclick="switchView('home')" id="nav-home" class="text-[#FF6B00] flex flex-col items-center gap-1 w-12 transition"><i class="fas fa-home text-xl"></i><span class="text-[10px] font-bold">Home</span></button>
        <button onclick="switchView('history')" id="nav-history" class="text-slate-400 hover:text-slate-800 flex flex-col items-center gap-1 w-12 transition"><i class="fas fa-history text-xl"></i><span class="text-[10px] font-bold">History</span></button>
        <div class="relative -top-8"><button onclick="openCart()" class="bg-gradient-to-r from-[#FF6B00] to-red-600 text-white w-14 h-14 rounded-full flex items-center justify-center shadow-xl border-[4px] border-slate-50"><i class="fas fa-shopping-bag text-xl"></i></button></div>
        <button onclick="shareApp()" class="text-slate-400 hover:text-slate-800 flex flex-col items-center gap-1 w-12"><i class="fas fa-share-alt text-xl"></i><span class="text-[10px] font-bold">Share</span></button>
        <button onclick="window.open('https://wa.me/918468966897','_blank')" class="text-slate-400 hover:text-green-500 flex flex-col items-center gap-1 w-12"><i class="fab fa-whatsapp text-xl"></i><span class="text-[10px] font-bold">Help</span></button>
    </div>

    <div id="cartModal" class="fixed inset-0 bg-slate-900/80 hidden z-[60] flex items-end sm:items-center justify-center backdrop-blur-sm p-0 sm:p-4">
        <div class="bg-white w-full max-w-md rounded-t-[2.5rem] sm:rounded-[2.5rem] p-6 max-h-[90vh] overflow-y-auto shadow-2xl relative slide-up">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-black text-slate-800 italic">Cart</h2>
                <button onclick="closeCart()" class="w-8 h-8 rounded-full bg-slate-100 flex items-center justify-center"><i class="fas fa-times text-slate-500"></i></button>
            </div>
            <div id="cartList" class="space-y-4 mb-8 min-h-[50px]"></div>
            
            <div class="space-y-4 border-t border-slate-100 pt-6">
                <button onclick="getLocation()" id="locBtn" class="w-full py-3 bg-blue-50 text-blue-600 rounded-xl text-xs font-bold flex items-center justify-center gap-2 border border-blue-100"><i class="fas fa-location-crosshairs"></i> Detect Exact Location</button>
                <textarea id="cAddr" rows="2" placeholder="Address (House No, Area)" class="w-full bg-slate-50 p-3 rounded-xl text-xs font-bold outline-none border focus:border-[#FF6B00]"></textarea>
                <div class="grid grid-cols-2 gap-3">
                    <button onclick="setPay('cod')" id="btn-cod" class="py-3 rounded-xl bg-slate-900 text-white text-xs font-bold shadow-lg">Cash</button>
                    <button onclick="setPay('upi')" id="btn-upi" class="py-3 rounded-xl bg-white border border-slate-200 text-xs font-bold text-slate-600">UPI</button>
                </div>
                <div class="flex justify-between items-center pt-2">
                    <div><p class="text-[10px] text-slate-400 font-bold uppercase">Total</p><p class="text-2xl font-black text-slate-800" id="finalTotal">‚Çπ0</p></div>
                    <button onclick="placeOrder()" class="bg-slate-900 text-white px-8 py-3.5 rounded-xl font-black shadow-xl active:scale-95 transition">PLACE ORDER</button>
                </div>
            </div>
        </div>
    </div>

    <div id="toast" class="fixed top-24 left-1/2 -translate-x-1/2 bg-slate-900 text-white px-6 py-3 rounded-full text-xs font-bold shadow-xl z-[80] opacity-0 transition-all pointer-events-none transform -translate-y-5 flex items-center gap-2"><i class="fas fa-check-circle text-green-400"></i> <span id="toastMsg">Success</span></div>

    <script>
        // INIT DATA
        const defaultProds = [{id:1, name:"Zinger Burger", price:179, cat:"Food", img:"https://source.unsplash.com/random/300x300/?burger"},{id:2, name:"Nike Air Max", price:2999, cat:"Fashion", img:"https://source.unsplash.com/random/300x300/?sneakers"}];
        if(!localStorage.getItem('f_products')) localStorage.setItem('f_products', JSON.stringify(defaultProds));
        let products = JSON.parse(localStorage.getItem('f_products')), cart = JSON.parse(localStorage.getItem('f_temp_cart')) || [], payMode='cod', userLat=null, userLng=null;
        
        // --- USER AUTH SYSTEM ---
        let userInfo = JSON.parse(localStorage.getItem('f_user_info'));
        if(!userInfo) {
            document.getElementById('userAuthModal').classList.remove('hidden');
        } else {
            document.getElementById('welcomeUser').innerText = `Hi, ${userInfo.name}`;
        }

        function saveUser() {
            const name = document.getElementById('authName').value;
            const phone = document.getElementById('authPhone').value;
            if(!name || !phone) return alert("Enter details");
            userInfo = { name, phone };
            localStorage.setItem('f_user_info', JSON.stringify(userInfo));
            document.getElementById('userAuthModal').classList.add('hidden');
            document.getElementById('welcomeUser').innerText = `Hi, ${name}`;
            location.reload();
        }

        // --- MAIN FUNCTIONS ---
        function render(cat='All') {
            let list = products.filter(p => (cat=='All'||p.cat==cat) && p.name.toLowerCase().includes(document.getElementById('searchInput').value.toLowerCase()));
            document.getElementById('productGrid').innerHTML = list.length ? list.map(p => {
                let qty = cart.find(c=>c.id==p.id)?.qty || 0;
                return `<div class="prod-card bg-white p-3 rounded-2xl shadow-sm border border-slate-100"><div class="h-32 rounded-xl overflow-hidden mb-2 relative"><img src="${p.img}" class="w-full h-full object-cover">${qty>0?`<span class="absolute top-2 right-2 bg-[#FF6B00] text-white text-[10px] w-5 h-5 flex items-center justify-center rounded-full font-bold shadow">${qty}</span>`:''}</div><h3 class="font-bold text-sm truncate text-slate-800">${p.name}</h3><div class="flex justify-between items-center mt-2"><span class="text-[#FF6B00] font-black">‚Çπ${p.price}</span>${qty==0?`<button onclick="modQty(${p.id},1)" class="w-8 h-8 rounded-lg bg-slate-900 text-white flex items-center justify-center"><i class="fas fa-plus text-xs"></i></button>`:`<div class="flex items-center gap-2 bg-slate-100 p-1 rounded-lg"><button onclick="modQty(${p.id},-1)" class="w-6 h-6 bg-white rounded font-bold text-slate-600">-</button><span class="text-xs font-bold w-2 text-center">${qty}</span><button onclick="modQty(${p.id},1)" class="w-6 h-6 bg-white rounded font-bold text-[#FF6B00]">+</button></div>`}</div></div>`;
            }).join('') : `<p class="col-span-full text-center text-slate-400 py-10">No items found</p>`;
            updateBadge();
        }

        function modQty(id, chg) {
            let item = cart.find(c=>c.id==id);
            if(item) { item.qty+=chg; if(item.qty<=0) cart=cart.filter(c=>c.id!=id); } else if(chg>0) cart.push({...products.find(x=>x.id==id), qty:1});
            localStorage.setItem('f_temp_cart', JSON.stringify(cart)); render(); if(!document.getElementById('cartModal').classList.contains('hidden')) openCart();
        }

        function openCart() {
            if(!cart.length) return showToast("Cart is empty");
            let total = cart.reduce((a,b)=>a+(b.price*b.qty),0);
            document.getElementById('cartList').innerHTML = cart.map(i => `<div class="flex justify-between items-center bg-slate-50 p-3 rounded-xl border"><div class="flex items-center gap-3"><img src="${i.img}" class="w-10 h-10 rounded bg-white object-cover"><div><p class="font-bold text-xs">${i.name}</p><p class="text-[10px] text-slate-500">‚Çπ${i.price} x ${i.qty}</p></div></div><div class="flex gap-2 bg-white p-1 rounded border"><button onclick="modQty(${i.id},-1)" class="px-2 font-bold">-</button><span class="text-xs font-bold pt-1">${i.qty}</span><button onclick="modQty(${i.id},1)" class="px-2 font-bold text-[#FF6B00]">+</button></div></div>`).join('');
            document.getElementById('finalTotal').innerText = `‚Çπ${total}`; document.getElementById('cartModal').classList.remove('hidden');
        }
        function closeCart(){ document.getElementById('cartModal').classList.add('hidden'); }
        function setPay(m){ payMode=m; document.getElementById('btn-cod').className = m=='cod'?"py-3 rounded-xl bg-slate-900 text-white text-xs font-bold":"py-3 rounded-xl bg-white border text-xs font-bold"; document.getElementById('btn-upi').className = m=='upi'?"py-3 rounded-xl bg-slate-900 text-white text-xs font-bold":"py-3 rounded-xl bg-white border text-xs font-bold"; }
        function updateBadge(){ document.getElementById('cartCount').innerText = cart.reduce((a,b)=>a+b.qty,0); document.getElementById('cartCount').style.transform = cart.length?'scale(1)':'scale(0)'; }

        function getLocation() {
            document.getElementById('locBtn').innerHTML = `<i class="fas fa-spinner fa-spin"></i> Detecting...`;
            navigator.geolocation.getCurrentPosition(p => { userLat=p.coords.latitude; userLng=p.coords.longitude; document.getElementById('locBtn').innerHTML=`<i class="fas fa-check"></i> Location Saved`; document.getElementById('locBtn').className="w-full py-3 bg-green-50 text-green-600 rounded-xl text-xs font-bold border border-green-200"; }, 
            () => { alert("Permission Denied"); document.getElementById('locBtn').innerHTML="Location Failed"; });
        }

        // --- ORDER & HISTORY ---
        function placeOrder() {
            if(!userInfo) return location.reload();
            let addr = document.getElementById('cAddr').value;
            if(!addr) return alert("Enter address");
            
            document.getElementById('cartModal').classList.add('hidden');
            let order = { id:'ORD'+Math.floor(1000+Math.random()*9000), customer:{name:userInfo.name, phone:userInfo.phone, addr, lat:userLat, lng:userLng}, items:cart, total:cart.reduce((a,b)=>a+(b.price*b.qty),0), payment:payMode, status:'Pending', date:new Date().toLocaleString() };
            let orders = JSON.parse(localStorage.getItem('f_orders')) || []; orders.unshift(order); localStorage.setItem('f_orders', JSON.stringify(orders));
            localStorage.setItem('f_last_order_id', order.id); localStorage.setItem('f_last_status', 'Pending');
            cart=[]; localStorage.removeItem('f_temp_cart'); updateBadge(); render();
            showToast("Order Placed Successfully!");
        }

        function switchView(view) {
            document.getElementById('view-home').style.display = view==='home'?'block':'none';
            document.getElementById('view-history').style.display = view==='history'?'block':'none';
            document.getElementById('nav-home').className = view==='home'?'text-[#FF6B00] flex flex-col items-center gap-1 w-12':'text-slate-400 flex flex-col items-center gap-1 w-12';
            document.getElementById('nav-history').className = view==='history'?'text-[#FF6B00] flex flex-col items-center gap-1 w-12':'text-slate-400 flex flex-col items-center gap-1 w-12';
            if(view==='history') renderHistory();
        }

        function renderHistory() {
            const allOrders = JSON.parse(localStorage.getItem('f_orders')) || [];
            // Filter Orders By Logged In Phone
            const myOrders = allOrders.filter(o => o.customer.phone === userInfo.phone);
            
            document.getElementById('historyList').innerHTML = myOrders.length ? myOrders.map(o => `
                <div class="bg-white p-4 rounded-2xl shadow-sm border border-slate-100">
                    <div class="flex justify-between items-start mb-2"><div><span class="text-xs font-bold text-slate-400">#${o.id}</span><p class="text-[10px] text-slate-400">${o.date}</p></div><span class="px-2 py-1 rounded text-[10px] font-bold uppercase bg-slate-100 text-slate-600">${o.status}</span></div>
                    <div class="text-xs text-slate-600 font-medium mb-3 border-b border-slate-50 pb-2">${o.items.map(i=>`${i.qty}x ${i.name}`).join(', ')}</div>
                    <div class="flex justify-between items-center"><span class="text-xs font-bold text-slate-400">Total Bill</span><span class="text-lg font-black text-slate-800">‚Çπ${o.total}</span></div>
                </div>`).join('') : `<div class="text-center py-10 opacity-50"><p>No orders yet</p></div>`;
        }

        // NOTIFICATION
        setInterval(() => {
            let oid=localStorage.getItem('f_last_order_id'), lastS=localStorage.getItem('f_last_status');
            if(oid) {
                let o = (JSON.parse(localStorage.getItem('f_orders'))||[]).find(x=>x.id==oid);
                if(o && o.status !== lastS) {
                    document.getElementById('notifTitle').innerText = o.status; document.getElementById('notifMsg').innerText = "Order updated";
                    let p = document.getElementById('liveNotification'); p.classList.remove('hidden'); p.classList.remove('-translate-y-64');
                    setTimeout(() => { p.classList.add('-translate-y-64'); setTimeout(()=>p.classList.add('hidden'),500); }, 5000);
                    localStorage.setItem('f_last_status', o.status);
                    if(document.getElementById('view-history').style.display === 'block') renderHistory();
                }
            }
        }, 3000);

        function filter(c){ render(c); }
        function showToast(m){ let t = document.getElementById('toast'); document.getElementById('toastMsg').innerText=m; t.style.opacity=1; t.style.transform='translate(-50%,0)'; setTimeout(()=>{t.style.opacity=0; t.style.transform='translate(-50%,-20px)'}, 2500); }
        function shareApp(){ navigator.share({title:'F-Store', url:window.location.href}); }

        render();
    </script>
</body>
</html>